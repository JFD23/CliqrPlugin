<header>
    <h1>Fragensammlungen</h1>
</header>

<table class="task-groups">
    <thead>
        <tr>
            <th></th>
            <th> Name der Fragensammlung </th>
            <th> Anzahl Fragen</th>
            <th> letzte Änderung </th>
            <th></th>
        </tr>
    </thead>
    <tbody>

        {{#each taskGroups}}
            <tr data-taskgroupid={{id}}>
                <td>
                    <input type="checkbox">
                </td>

                <td>
                    <a href="#task-groups-{{id}}">
                        {{test.title}}
                    </a>
                </td>

                <td>
                    <span class="bubble" data-tooltip="Fragensammlung mit {{tasks_count}} Fragen">{{tasks_count}}</span>
                </td>

                <td>
                    {{moment test.changed}}
                </td>

                <td>
                    {{fab "export" "Export" "archive3" }}
                    {{fab "duplicate" "Duplizieren" "add/files" }}
                    {{fab "remove" "Löschen" "trash" }}
                </td>
            </tr>

        {{else}}
            <tr>
                <td class="cliqr--empty" colspan="5"> Es sind keine Fragensammlungen vorhanden.</td>
            </tr>
        {{/each}}

        <tfoot>
            {{#if_mode "button"}}
                <tr>
                    <td colspan="5">
                        <div class="button-group">
                            {{button "add-task-group" "Fragensammlung erstellen" icon="add"}}
                            {{button "import-task-group" "Import" icon="upload2"}}
                        </div>
                    </td>
                </tr>

            {{/if_mode}}

            {{#if_mode "add"}}
                <tr>
                    <td colspan="5">

                        <form class="cliqr--add-task-group-form"
                              method="post"
                              accept-char="UTF-8">

                            <fieldset>
                                <legend>Fragensammlung erstellen</legend>
                                <label for="cliqr--task-group-title">Name:</label>
                                <div class="control-group">
                                    <input id="cliqr--task-group-title" name="title" required>
                                </div>
                            </fieldset>

                            <fieldset>
                                <div class="button-group">
                                    {{button "create" "Speichern"}}
                                    {{button "cancel" "Abbrechen"}}
                                </div>
                            </fieldset>
                        </form>
                    </td>
                </tr>
            {{/if_mode}}

            {{#if_mode "import"}}
                <tr>
                    <td colspan="5">
                        <form class="cliqr--import-task-group-form"
                              enctype="multipart/form-data"
                              action="{{url_for "task_groups/import"}}"
                              method="POST">

                            <fieldset>
                                <legend>Fragensammlung importieren</legend>


                                <div class="cliqr--upload-box">
                                    {{icon "upload2"}}
                                    <input type="file" name="task-group-import-file" id="cliqr--task-groups-import-file">

                                    <label for="cliqr--task-groups-import-file">
                                        <strong>Datei auswählen</strong>
                                        <!-- <span class="box__dragndrop"> oder Drag and Drop</span>. -->
                                    </label>
                                </div>

                            </fieldset>

                            <fieldset>
                                <div class="button-group">
                                    {{button "import-task-group" "Importieren" icon="upload2"}}
                                    {{button "cancel" "Abbrechen" icon="decline"}}
                                </div>
                            </fieldset>
                        </form>
                    </td>
                </tr>
            {{/if_mode}}


        </tfoot>


    </tbody>
</table>
